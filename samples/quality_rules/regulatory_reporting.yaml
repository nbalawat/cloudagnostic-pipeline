---
# Regulatory Reporting Quality Rules
name: "Regulatory Reporting Quality Suite"
description: "Data quality rules for regulatory compliance and reporting"
domain: "banking"
category: "regulatory_reporting"
version: "1.0.0"

rules:
  - id: "reg_reporting_completeness"
    name: "Regulatory Report Completeness"
    description: "Ensures all required fields for regulatory reports are present"
    type: "regulatory_completeness"
    severity: "critical"
    config:
      report_types:
        - name: "SAR"
          required_fields:
            - field: "filing_institution"
              validations: ["not_null", "length_range(1,100)"]
            - field: "suspicious_activity_type"
              validations: ["not_null", "in_list(SAR_activity_types)"]
            - field: "activity_date_range"
              validations: ["not_null", "date_range"]
            - field: "suspect_information"
              validations: ["not_null", "structured_data"]
        - name: "CTR"
          required_fields:
            - field: "transaction_amount"
              validations: ["not_null", ">=10000"]
            - field: "transaction_date"
              validations: ["not_null", "valid_date"]
            - field: "conductor_information"
              validations: ["not_null", "structured_data"]
    metadata:
      regulatory_body: "FinCEN"
      filing_deadline: "30d"

  - id: "aml_monitoring"
    name: "AML Monitoring Rules"
    description: "Anti-Money Laundering monitoring rules"
    type: "aml_detection"
    severity: "critical"
    config:
      scenarios:
        - name: "structured_transactions"
          description: "Detect structured transactions below CTR threshold"
          parameters:
            time_window: "15d"
            amount_threshold: 9000
            transaction_count: 3
        - name: "high_risk_countries"
          description: "Monitor transactions with high-risk countries"
          parameters:
            country_list: "FATF_blacklist"
            enhanced_due_diligence: true
        - name: "rapid_movement"
          description: "Detect rapid movement of funds"
          parameters:
            time_window: "24h"
            min_transactions: 3
            min_total_amount: 50000

  - id: "capital_adequacy"
    name: "Capital Adequacy Reporting"
    description: "Basel III capital adequacy reporting rules"
    type: "financial_reporting"
    severity: "critical"
    config:
      metrics:
        - name: "tier1_capital_ratio"
          formula: "tier1_capital / risk_weighted_assets"
          minimum_threshold: 0.06
        - name: "total_capital_ratio"
          formula: "total_capital / risk_weighted_assets"
          minimum_threshold: 0.08
        - name: "leverage_ratio"
          formula: "tier1_capital / total_assets"
          minimum_threshold: 0.03
      validation_rules:
        - "all_ratios_above_threshold"
        - "consistent_asset_classification"
        - "complete_risk_weights"

data_quality_checks:
  - id: "report_reconciliation"
    name: "Regulatory Report Reconciliation"
    type: "reconciliation"
    config:
      sources:
        - name: "general_ledger"
          key_fields: ["account_number", "date"]
        - name: "regulatory_reports"
          key_fields: ["gl_account", "report_date"]
      tolerance: 0.0001
      reconciliation_points:
        - "total_assets"
        - "total_liabilities"
        - "capital_components"

  - id: "historical_consistency"
    name: "Historical Data Consistency"
    type: "trend_analysis"
    config:
      metrics:
        - name: "total_assets"
          expected_change_range: [-0.1, 0.1]
        - name: "capital_ratios"
          expected_change_range: [-0.02, 0.02]
      lookback_period: "12m"
      frequency: "monthly"

compliance_checks:
  - id: "filing_deadlines"
    name: "Regulatory Filing Deadline Monitor"
    type: "deadline_monitor"
    config:
      reports:
        - name: "SAR"
          deadline: "30d"
          grace_period: "5d"
        - name: "CTR"
          deadline: "15d"
          grace_period: "2d"
      alerts:
        warning_threshold: "7d"
        critical_threshold: "3d"

  - id: "data_retention"
    name: "Regulatory Data Retention"
    type: "retention_policy"
    config:
      retention_periods:
        SAR: "5y"
        CTR: "5y"
        KYC: "5y"
        transaction_records: "7y"
      archival_strategy:
        type: "compressed_archive"
        encryption_required: true

alerts:
  - id: "regulatory_alert"
    name: "Regulatory Compliance Alert"
    type: "compliance_alert"
    config:
      severity_levels:
        critical:
          channels: ["email", "sms", "dashboard"]
          escalation_time: "1h"
        high:
          channels: ["email", "dashboard"]
          escalation_time: "4h"
        medium:
          channels: ["email"]
          escalation_time: "24h"
      recipients:
        - role: "compliance_officer"
          channels: ["all"]
        - role: "department_head"
          channels: ["email", "dashboard"]

reporting:
  - name: "regulatory_compliance_dashboard"
    type: "real_time_dashboard"
    config:
      metrics:
        - "filing_completion_rate"
        - "deadline_compliance_rate"
        - "data_quality_score"
        - "outstanding_alerts"
      refresh_rate: "5m"
      access_control:
        roles: ["compliance_officer", "auditor", "senior_management"]
